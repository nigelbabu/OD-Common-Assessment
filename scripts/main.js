"use strict";Ractive.prototype.remove=function(e,t){var i=this.get(e),n=i.indexOf(t);return-1!==n?this.splice(e,n,1):Promise.defer()};var indicators=function(){function e(e){for(var t={},i=[],n=[],s=[],r=0;r<e.length;r++)utilities.isTrue(e[r].grouping)&&n.push(e[r].id),utilities.isTrue(e[r].scoring)&&(i.push(e[r].id),utilities.isTrue(e[r]["default"])&&s.push(e[r].id)),t[e[r].id]=e[r];return{all:t,scoring:i,grouping:n,visible:s}}function t(e){var t=0;return t}return{calculate:t,processed:e}}(),utilities=function(){function e(e,t,i){e=e.slice();var n=e.sort(function(e,n){return e[t]<n[t]?-i:i});return n}function t(e){return"y"===e.toLowerCase()||"true"===e.toLowerCase()||1==e?!0:!1}return{sort:e,isTrue:t}}(),services=function(){function e(e){var t="1kOOvztwbY1RNm545RKG8Ua6bh2GgX-P_wFadPkdH2ig";Tabletop.init({key:t,callback:e,simpleSheet:!1,prettyColumnNames:!1})}return{getData:e}}(),app=function(){function e(e,t){console.log("returned");var i=t.sheets("places").elements,n=t.sheets("indicators").elements,s=t.sheets("values").elements;i.map(function(e){e.score=0,e.valuesMap={},s.filter(function(t){return t.placeid===e.id&&(e.valuesMap[t.indicatorid]=t,t.normalised=parseInt(t.normalised)||0),!0})});var r=Ractive.extend({isolated:!1,template:"#template-filter"}),o=Ractive.extend({isolated:!1,template:"#template-grouping"}),c=new Ractive({el:"#table",template:"#template-table",data:{scores:[],places:i,scoring:{},indicators:{processed:indicators.processed(n),score:function(){console.log("score")}},sorting:{sort:utilities.sort,column:"title",direction:1},calculateScore:function(e){},getIndicator:function(e,t){var i="";return null!=e&&(i=this.get("indicators.processed.all")[e][t]),i},isVisible:function(e){return this.get("indicators.processed.visible").indexOf(e)>-1}},computed:{},components:{filter:r,grouping:o}});console.log(c.get("places")),console.log(c.get("indicators")),c.on("sorting.sort",function(e,t){this.set("sorting.column",t),this.set("sorting.direction",-1*this.get("sorting.direction"))}),c.on("indicators.processed.visible",function(e,t){}),c.on("indicators.score",function(e){}),c.on("indicators.score",function(e){}),c.fire("indicators.score")}function t(){services.getData(e)}return{start:t}}();